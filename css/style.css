function setLang(lang) {
    // Set the data-lang attribute on the body
    document.body.setAttribute('data-lang', lang);
    
    // Get all elements with language attributes
    const elements = document.querySelectorAll('[data-en], [data-so], [data-ku]');
    
    elements.forEach(el => {
        // Get the text for the selected language
        const text = el.getAttribute(`data-${lang}`);
        if (text) {
            el.textContent = text;
        }
    });
    
    // Save selected language to localStorage for persistence
    localStorage.setItem('selectedLanguage', lang);
    
    // Update active button
    updateActiveLanguageButton(lang);
}

function updateActiveLanguageButton(activeLang) {
    const buttons = document.querySelectorAll('.lang-switcher button');
    buttons.forEach(button => {
        button.style.opacity = '0.7';
    });
    
    // Highlight active button
    const langMap = {
        'en': 'ðŸ‡¬ðŸ‡§ EN',
        'so': 'ðŸ‡°ðŸ‡· Ø³Û†Ø±Ø§Ù†ÛŒ', 
        'ku': 'ðŸ‡°ðŸ‡· KurmancÃ®'
    };
    
    buttons.forEach(button => {
        if (button.textContent.includes(langMap[activeLang])) {
            button.style.opacity = '1';
            button.style.fontWeight = 'bold';
        }
    });
}

// Set default language on page load
document.addEventListener('DOMContentLoaded', function() {
    // Check if there's a saved language preference
    const savedLang = localStorage.getItem('selectedLanguage') || 'en';
    setLang(savedLang);
});

// Initialize language buttons
document.addEventListener('DOMContentLoaded', function() {
    const langButtons = document.querySelectorAll('.lang-switcher button');
    langButtons.forEach(button => {
        button.addEventListener('click', function() {
            const buttonText = this.textContent;
            let lang = 'en';
            
            if (buttonText.includes('Ø³Û†Ø±Ø§Ù†ÛŒ')) {
                lang = 'so';
            } else if (buttonText.includes('KurmancÃ®')) {
                lang = 'ku';
            }
            
            setLang(lang);
        });
    });
});
